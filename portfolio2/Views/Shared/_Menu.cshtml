@*LOGGED IN NAVBAR*@

<nav class="navbar navbar-dark navbar-expand-sm sticky-top">
    <a class="navbar-brand" asp-controller="Home" asp-action="StudentMain"><img src="~/images/logo.png" alt="LinkUp logo" width="120"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse loggedin" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Sessions
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" asp-controller="Session" asp-action="Index">All Sessions</a>
                    <a class="dropdown-item" asp-controller="Session" asp-action="MySession">My Sessions</a>
                    <a class="dropdown-item" asp-controller="Session" asp-action="SessionJoined">Sessions Joined</a>
                    <a class="dropdown-item" asp-controller="Session" asp-action="Create">Create Session</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Requests
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="~/Request/AllRequests">View All Requests</a>
                    <a class="dropdown-item" href="~/Request/MyRequests">My Requests</a>
                    <a class="dropdown-item" href="~/Request/MakeRequest">Create Requests</a>
                </div>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Shop
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="~/Shop/Index">Browse shop</a>
                    <a class="dropdown-item" href="~/Shop/PurchaseHistory">Purchase History</a>
                </div>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="http://teams.microsoft.com" onclick="return confirm('You will be redirected to Microsoft Teams...')" target="_blank">Messages</a>
            </li>
            @{
                string userId = "Anonymous"; string userRole = "Unknown";
                if (Context.Session.GetString("Role") != null) { userRole = Context.Session.GetString("Role"); }
                if (Context.Session.GetString("LoginID") != null)
                {
                    userId = Context.Session.GetString("LoginID");
                }
            }
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle avatar" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    @if (Context.Session.GetString("Photo") != null)
                    {
                        string imageFileName = Context.Session.GetString("Photo");
                        <img src="~/images/Profilepictures/@imageFileName" alt="Avatar">
                    }
                    else
                    {
                        <img src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg" alt="Avatar">
                    }
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                    <p style="padding:2px 15px;">
                        <span style="font-weight:bold">@userId</span>&nbsp;
                        (@Context.Session.GetString("StudentNumber"))
                    </p>
                    <div class="dropdown-divider"></div>
                    @if (Context.Session.GetString("StudentNumber") == "s10189672" || Context.Session.GetString("StudentNumber") == "s10189566")
                    {
                        <script>
                            var text = "Increase Points" // YOUR TEXT
                            var speed = 65 // SPEED OF FADE

                            // ********** LEAVE THE NEXT BIT ALONE!


                            if (document.all || document.getElementById) {
                                document.write('<a id="highlight" class="dropdown-item" href="~/Home/IncreasePoints">' + text + '</a>')
                                var storetext = document.getElementById ? document.getElementById("highlight") : document.all.highlight
                            }
                            else
                                document.write(text)
                            var hex = new Array("00", "14", "28", "3C", "50", "64", "78", "8C", "A0", "B4", "C8", "DC", "F0")
                            var r = 1
                            var g = 1
                            var b = 1
                            var seq = 1
                            function changetext() {
                                rainbow = "#" + hex[r] + hex[g] + hex[b]
                                storetext.style.color = rainbow
                            }
                            function change() {
                                if (seq == 6) {
                                    b--
                                    if (b == 0)
                                        seq = 1
                                }
                                if (seq == 5) {
                                    r++
                                    if (r == 12)
                                        seq = 6
                                }
                                if (seq == 4) {
                                    g--
                                    if (g == 0)
                                        seq = 5
                                }
                                if (seq == 3) {
                                    b++
                                    if (b == 12)
                                        seq = 4
                                }
                                if (seq == 2) {
                                    r--
                                    if (r == 0)
                                        seq = 3
                                }
                                if (seq == 1) {
                                    g++
                                    if (g == 12)
                                        seq = 2
                                }
                                changetext()
                            }
                            function starteffect() {
                                if (document.all || document.getElementById)
                                    flash = setInterval("change()", speed)
                            }
                            starteffect()
                        </script>
                    }
                    <a class="dropdown-item" asp-controller="Student" asp-action="Details">Profile</a>
                    <a class="dropdown-item" asp-controller="Student" asp-action="StudentLeaderboard">Leaderboard</a>
                    <a class="dropdown-item" href="~/Home/LogOut">Sign Out</a>
                </div>

            </li>

        </ul>
    </div>

</nav>

